undefined===window.THP.Dashboard&&(window.THP.Dashboard={}),window.addEventListener("DOMContentLoaded",()=>{window.THP.Notifications.init(),window.THP.Dashboard.init(),window.THP.Dashboard.Users.Danger.init(),window.THP.Dashboard.Subscriptions.init(),window.THP.Dashboard.HelpItems.init()}),window.THP.Dashboard.init=function(){},window.THP.triggerScriptForAction=function(e,t){return document.body.dataset.thpAction==t&&document.body.dataset.thpController==e},undefined===window.THP.Notifications&&(window.THP.Notifications={}),window.addEventListener("DOMContentLoaded",()=>{}),window.THP.Notifications.init=function(){window.THP.Notifications.clearNotifications()},window.THP.Notifications.clearNotifications=function(){$(".thp-flashes").empty()},window.THP.Notifications.notify=function(e,t){notificationType="error"==e?e:"success",notificationType,toastr[notificationType](t)},undefined===window.THP.Dashboard.Users&&(window.THP.Dashboard.Users={}),undefined===window.THP.Dashboard.Users.Danger&&(window.THP.Dashboard.Users.Danger={}),window.addEventListener("DOMContentLoaded",()=>{}),window.THP.Dashboard.Users.Danger.init=function(){$("form button.thp-user-danger-submit").bind("click",window.THP.Dashboard.Users.Danger.checkFields),$("form button.thp-user-danger-delete").bind("click",window.THP.Dashboard.Users.Danger.checkCurrentPassword)},window.THP.Dashboard.Users.Danger.checkCurrentPassword=function(e){if(current_password=$("input#current_password").val().trim(),null==current_password||""==current_password)return window.THP.Notifications.notify("error","Pour tout changement ici, entre ton mot de passe actuel"),e.preventDefault(),!1},window.THP.Dashboard.Users.Danger.checkFields=function(e){return 0!=window.THP.Dashboard.Users.Danger.checkCurrentPassword(e)&&($("#email").prop("defaultValue")!=$("#email").val()||(0==$("input#password").val().length||$("input#password").val()!=$("input#password_confirmation").val()?(window.THP.Notifications.notify("error","Les 2 nouveaux mot de passe sont vides ou ne correspondent pas"),e.preventDefault(),!1):void 0))},undefined===window.THP.Dashboard.Subscriptions&&(window.THP.Dashboard.Subscriptions={}),window.addEventListener("DOMContentLoaded",()=>{}),window.THP.Dashboard.Subscriptions.init=function(){window.THP.triggerScriptForAction("subscriptions","new")&&(window.THP.Dashboard.Subscriptions.checkUserConfirmationsBeforePayment(),window.THP.Dashboard.Subscriptions.bindToSubscriptionCheckboxes(),$("select.pricing-select").on("change",window.THP.Dashboard.Subscriptions.togglePaymentDisplays),window.THP.Dashboard.Subscriptions.togglePaymentDisplays()),window.THP.triggerScriptForAction("subscriptions","edit")&&(window.THP.Dashboard.Subscriptions.toggleSubscriptionFriendsForm(event={data:{show:!1}}),$(".subscription-friends-show").on("click",{show:!0},window.THP.Dashboard.Subscriptions.toggleSubscriptionFriendsForm),$(".subscription-friends-hide").on("click",{show:!1},window.THP.Dashboard.Subscriptions.toggleSubscriptionFriendsForm),$(".data-repeater-create").on("click",window.THP.Dashboard.Subscriptions.addSubscriptionFriendRow),$(".friend-data-repeater-list").on("click",".friend-data-repeater-item button",window.THP.Dashboard.Subscriptions.removeSubscriptionFriendRow)),$("#no_friend").hide()},window.THP.Dashboard.Subscriptions.bindToSubscriptionCheckboxes=function(){$("#cdp").bind("change",window.THP.Dashboard.Subscriptions.checkUserConfirmationsBeforePayment),$("#full_time_job").bind("change",window.THP.Dashboard.Subscriptions.checkUserConfirmationsBeforePayment),$("#no_constraint").bind("change",window.THP.Dashboard.Subscriptions.checkUserConfirmationsBeforePayment)},window.THP.Dashboard.Subscriptions.togglePaymentButton=function(e){e?document.querySelector("#btn-pay").removeAttribute("disabled"):document.querySelector("#btn-pay").setAttribute("disabled","true")},window.THP.Dashboard.Subscriptions.toggleFreeButton=function(e){e?document.querySelector("#btn-validate-free").removeAttribute("disabled"):document.querySelector("#btn-validate-free").setAttribute("disabled","true")},window.THP.Dashboard.Subscriptions.checkUserConfirmationsBeforePayment=function(){document.querySelector("#cdp").checked&&document.querySelector("#full_time_job").checked&&document.querySelector("#no_constraint").checked?(window.THP.Dashboard.Subscriptions.togglePaymentButton(!0),window.THP.Dashboard.Subscriptions.toggleFreeButton(!0)):(window.THP.Dashboard.Subscriptions.togglePaymentButton(!1),window.THP.Dashboard.Subscriptions.toggleFreeButton(!1))},window.THP.Dashboard.Subscriptions.togglePaymentDisplays=function(){let e=$("select.pricing-select option:selected").val(),t="full_price_payment_in_three_installments"==e;window.document.getElementsByClassName("three-installments-explanation")[0].style.visibility=t?"visible":"hidden";let n="covid"==e;window.document.getElementsByClassName("free-section")[0].style.display=n?"block":"none",window.document.getElementsByClassName("payment-section")[0].style.display=n?"none":"block"},window.THP.Dashboard.Subscriptions.toggleSubscriptionFriendsForm=function(e){show="show"in e.data?e.data.show:null,null==show?$(".subscription-friends-form").toggle():$(".subscription-friends-form").toggle(show),$(".subscription-friends-form").is(":visible")?$("#no_friend").hide():$("#no_friend").show()},window.THP.Dashboard.Subscriptions.addSubscriptionFriendRow=function(){friendBlack=document.querySelector(".subscription-friends-form .friend-data-repeater-item"),clone=friendBlack.cloneNode(!0),$(clone).find("input").val(""),last_friend_input_name=document.querySelector(".subscription-friends-form .friend-data-repeater-list .friend-data-repeater-item:last-child input").name,new_friend_input_name_id=Number(last_friend_input_name.split("[")[1].split("]")[0])+1,$(clone).find("input.friend-first-name").attr("name","group["+new_friend_input_name_id+"][first_name]"),$(clone).find("input.friend-last-name").attr("name","group["+new_friend_input_name_id+"][last_name]"),document.querySelector(".subscription-friends-form .friend-data-repeater-list").appendChild(clone)},window.THP.Dashboard.Subscriptions.removeSubscriptionFriendRow=function(e){length=$(e.target).closest(".friend-data-repeater-list").children().length,length>1?$(e.target).closest(".friend-data-repeater-item").remove():$(e.target).closest(".friend-data-repeater-item").find("input").val("")},undefined===window.THP.Dashboard.HelpItems&&(window.THP.Dashboard.HelpItems={}),window.addEventListener("DOMContentLoaded",()=>{}),window.THP.Dashboard.HelpItems.init=function(){window.THP.triggerScriptForAction("help_items","index")&&(document.querySelectorAll(".thp-help-item[data-has-children='true']").forEach(e=>{e.addEventListener("click",window.THP.Dashboard.HelpItems.helpItemClickHandler,!1)}),document.querySelectorAll(".thp-help-link").forEach(e=>{e.addEventListener("click",window.THP.Dashboard.HelpItems.helpItemReturnClickHandler,!1)}),window.THP.Dashboard.HelpItems.changeHelpSection(0))},window.THP.Dashboard.HelpItems.helpItemClickHandler=function(e){helpItem=e.target.closest(".thp-help-item"),valeur=helpItem.dataset.helpItemId,window.THP.Dashboard.HelpItems.changeHelpSection(valeur)},window.THP.Dashboard.HelpItems.helpItemReturnClickHandler=function(){activeHelpItemNode=document.querySelector(".thp-help-item.active"),parentId=activeHelpItemNode.dataset.parentId,parentNode=document.querySelector(".thp-help-item[data-help-item-id='"+parentId+"']"),helpItemTargetId=parentNode.dataset.parentId,window.THP.Dashboard.HelpItems.changeHelpSection(helpItemTargetId)},window.THP.Dashboard.HelpItems.toggleBackButton=function(e){backButtonNode=document.querySelector("button.thp-help-link"),backButtonNode.style.display=e?"block":"none"},window.THP.Dashboard.HelpItems.changeHelpSection=function(e){window.THP.Dashboard.HelpItems.toggleBackButton(0!=e),window.THP.Dashboard.HelpItems.hideAllItems(),window.THP.Dashboard.HelpItems.showItemsWithParentId(e),node=document.querySelector(".thp-help-item[data-help-item-id='"+e+"']"),null!=node&&window.THP.Dashboard.HelpItems.generateBreadcrumb(node)},window.THP.Dashboard.HelpItems.hideAllItems=function(){document.querySelectorAll(".thp-help-item.active").forEach(e=>{e.classList.remove("active")})},window.THP.Dashboard.HelpItems.setItemAsParent=function(e){node=document.querySelector(".thp-help-item[data-help-item-id='"+e+"']"),node.classList.add("parent")},window.THP.Dashboard.HelpItems.showItemsWithId=function(e){node=document.querySelector(".thp-help-item[data-help-item-id='"+e+"']"),node.classList.add("active")},window.THP.Dashboard.HelpItems.showItemsWithParentId=function(e){document.querySelectorAll(".thp-help-item[data-parent-id='"+e+"']").forEach(e=>{e.classList.add("active")})},window.THP.Dashboard.HelpItems.generateBreadcrumb=function(e){breadcrumbString="",breadcrumbString=window.THP.Dashboard.HelpItems.generateBreadcrumbDescending(e,breadcrumbString,!0)},window.THP.Dashboard.HelpItems.generateBreadcrumbDescending=function(e,t,n){return parentNode=e.parentNode.closest(".thp-help-item"),null!=parentNode&&(t=window.THP.Dashboard.HelpItems.generateBreadcrumbDescending(parentNode,t,!1)),t+=window.THP.Dashboard.HelpItems.generateBreadcrumbItemFromNode(e,n)},window.THP.Dashboard.HelpItems.generateBreadcrumbItemFromNode=function(e,t){return helpItemId=e.dataset.helpItemId,helpItemSlug=e.dataset.slug,window.THP.Dashboard.HelpItems.setItemAsParent(helpItemId),window.THP.Dashboard.HelpItems.generateBreadcrumbItem(helpItemId,helpItemSlug,t)},window.THP.Dashboard.HelpItems.generateBreadcrumbItem=function(e,t,n){return node=n?"<li class='breadcrumb-item active' aria-current='page'>":"<li class='breadcrumb-item'>",node+="<a href='' class='thp-help-link' 'data-help-item-id'='"+e+"' >",node+t+"</a></li>"};